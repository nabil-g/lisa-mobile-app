function socketCo(){var t=io.connect("http://"+localStorage.lisaAddress+":8080");app.socket=t,t.on("connect_error",function(){console.log("Connect error !"),t.close(),app.$f7.closeModal(),app.$f7.loginScreen(),app.$f7.closeNotification(".notifications"),app.$f7.alert("<b>Erreur</b> : problème de connexion. Vérifiez votre réseau local ou l'adresse du serveur Lisa.",["Lisa"])}),t.on("connect",function(){console.log("Connecté!"),app.$f7.closeModal()}),t.on("client",function(t){1==t&&(app.$f7.closeNotification(".notifications"),app.$f7.addNotification({message:"Un autre client est connecté !"}))}),t.on("musicPlaying",function(t){app.musicStatus.musicPlaying=t}),t.on("musicTrack",function(t){app.musicStatus.musicTrack=t}),t.on("musicRepeat",function(t){app.musicStatus.musicRepeat=t}),t.on("musicShuffle",function(t){app.musicStatus.musicShuffle=t}),t.on("settings",function(t){app.settings=t}),t.on("weather",function(t){app.weather=t})}Vue.use(Framework7Vue);var app=new Vue({el:"#app",framework7:{root:"#app",routes:[],material:!0},data:{inputDate:"",inputTime:"",inputReminderText:"",address:localStorage.lisaAddress,musicStatus:{musicPlaying:void 0,musicTrack:void 0,musicRepeat:void 0,musicShuffle:void 0},weather:void 0,socket:void 0,settings:{mail:{enabled:void 0,username:void 0,password:void 0,host:void 0},alarm:{enabled:void 0,music_onwake:void 0,secondes:void 0,minutes:void 0,heures:void 0,jour_mois:void 0,mois:void 0,jour_semaine:void 0},weather:{weather_id:void 0,cityID:void 0,units:void 0},present:void 0,appLanguage:void 0,voiceLanguage:void 0,sentences:{wakeup:void 0},devices:[],defaultAnswers:{},reminders:[]}},methods:{connect:function(){localStorage.lisaAddress=this.address,socketCo()},next:function(){this.socket.emit("music","next")},previous:function(){this.socket.emit("music","previous")},togglePlay:function(){this.musicStatus.musicPlaying=!this.musicStatus.musicPlaying,this.socket.emit("music","togglePlay")},toggleShuffle:function(){this.musicStatus.musicShuffle=!this.musicStatus.musicShuffle,this.socket.emit("music","shuffle")},toggleRepeat:function(){this.musicStatus.musicRepeat=!this.musicStatus.musicRepeat,this.socket.emit("music","repeat")},stop:function(){this.musicStatus.musicPlaying=!1,this.socket.emit("music","stop")},stopLisa:function(){confirm("Voulez-vous vraiment interrompre Lisa ?")&&this.socket.emit("cmd","stop")},shutdown:function(){confirm("Voulez-vous vraiment éteindre le serveur ?")&&this.socket.emit("cmd","shutdown")},refresh:function(){this.socket.emit("refresh","")},addReminder:function(){this.settings.reminders.unshift({date:this.inputDate,time:this.inputTime,text:this.inputReminderText}),this.inputDate="",this.inputTime="",this.inputReminderText=""},deleteReminder:function(t){this.settings.reminders.splice(t,1)}},computed:{degreesUnits:function(){return"imperial"==this.settings.weather.units?"F":"metric"==this.settings.weather.units?"C":"K"},alarmTime:{get:function(){return this.settings.alarm.heures+":"+this.settings.alarm.minutes},set:function(t){var e=t.split(":");this.settings.alarm.heures=e[0],this.settings.alarm.minutes=e[1]}},reminderFormFilled:function(){if(this.inputTime&&this.inputDate&&this.inputReminderText)return!0}},filters:{moment:function(t){return moment.locale(app.settings.appLanguage),moment.unix(t).format("lll")},round:function(t){return Math.round(t)},capitalize:function(t){return t.toUpperCase()}}});app.$watch("settings",function(){app.socket.emit("settings",app.settings),app.socket.emit("refresh","")},{deep:!0}),localStorage.lisaAddress?socketCo():app.$f7.loginScreen();